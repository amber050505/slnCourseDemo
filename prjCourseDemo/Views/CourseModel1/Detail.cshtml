@model prjCourseDemo.ViewModel.CCourseModelAllViewModel

@{
    ViewData["Title"] = "test";
}
<style>
    .test {
        width: 4000px;
    }
</style>
<!-- Checkout Section Begin -->
<form class="checkout spad" asp-action="Detail">

    @*<div class="container-fluid">
            <div class="checkout__form">
                <form asp-action="Create">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div class="row">
                        <div class="col-lg-8 col-md-6">
                            <h6 class="checkout__title">Billing Details</h6>
                            <input type="hidden" asp-for="FCourseId" class="form-control" />
                            <input type="hidden" asp-for="FModleSate" class="form-control" />
                            <div class="checkout__input">
                                <p><label asp-for="FCategory" class="control-label"></label><span>*</span></p>
                                <input asp-for="FCategory" class="form-control" />
                                <span asp-validation-for="FCategory" class="text-danger"></span>
                            </div>
                            <div class="checkout__input">
                                <p><label asp-for="FName" class="control-label"></label><span>*</span></p>
                                <input asp-for="FName" class="form-control" />
                                <span asp-validation-for="FName" class="text-danger"></span>
                            </div>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="checkout__input">
                                        <p><label asp-for="FTotalHours" class="control-label"></label><span>*</span></p>
                                        <input asp-for="FTotalHours" class="form-control" />
                                        <span asp-validation-for="FTotalHours" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="checkout__input">
                                        <p><label asp-for="FTotalNumber" class="control-label"></label><span>*</span></p>
                                        <input asp-for="FTotalNumber" class="form-control" />
                                        <span asp-validation-for="FTotalNumber" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="checkout__input">
                                        <p><label asp-for="FGrade" class="control-label"></label><span>*</span></p>
                                        <input asp-for="FGrade" class="form-control" />
                                        <span asp-validation-for="FGrade" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="checkout__input">
                                        <p><label asp-for="FSchoolYear" class="control-label"></label><span>*</span></p>
                                        <input asp-for="FSchoolYear" class="form-control" />
                                        <span asp-validation-for="FSchoolYear" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="checkout__input">
                                        <p><label asp-for="FOriginalPrice" class="control-label"></label><span>*</span></p>
                                        <input asp-for="FOriginalPrice" class="form-control" />
                                        <span asp-validation-for="FOriginalPrice" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="checkout__input">
                                        <p><label asp-for="FSpecialOffer" class="control-label"></label><span>*</span></p>
                                        <input asp-for="FSpecialOffer" class="form-control" />
                                        <span asp-validation-for="FSpecialOffer" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="checkout__input">
                                <p><label asp-for="FSummary" class="control-label"></label><span>*</span></p>
                                <input asp-for="FSummary" class="form-control" />
                                <span asp-validation-for="FSummary" class="text-danger"></span>
                            </div>
                        </div>


                    </div>
                    <div class="form-group">
                        <input type="submit" value="Create" class="btn btn-primary" />
                    </div>
                </form>
            </div>
        </div>*@

    <div class="product__details__tab">
        <div class="col-lg-12">
            <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" data-toggle="tab" href="#tabs-1" role="tab">Description</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#tabs-2" role="tab">Additional information</a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active" id="tabs-1" role="tabpanel">
                    <div class="container-fluid">
                        <div class="checkout__form">
                            <div>
                                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                                <div class="row">
                                    <div class="col-lg-8 col-md-6">
                                        <input type="hidden" asp-for="@Model.c_model.FCourseId" class="form-control" />
                                        <input type="hidden" asp-for="@Model.c_model.FModleSate" class="form-control" />
                                        @*<div class="checkout__input">
                                                <p><label asp-for="@Model.c_model.FCategory" class="control-label"></label><span>*</span></p>
                                                <input asp-for="@Model.c_model.FCategory" class="form-control" />
                                                <span asp-validation-for="@Model.c_model.FCategory" class="text-danger"></span>
                                            </div>*@
                                        <div class="checkout__input">
                                            <p><label asp-for="@Model.c_model.FCategory" class="control-label"></label><span>*</span></p>
                                            @*@Html.DropDownListFor(model=>model.c_model.FCategory,(IEnumerable<SelectListItem>)ViewBag.CategoryDropDown, new { @class = "form-control" })*@
                                            @Html.DropDownListFor(model => model.c_model.FCategory, (IEnumerable<SelectListItem>)Model.CategoryDDL, new { @class = "form-control" })
                                            <span asp-validation-for="@Model.c_model.FCategory" class="text-danger"></span>
                                        </div>
                                        <div class="checkout__input">
                                            <p><label asp-for="@Model.c_model.FName" class="control-label"></label><span>*</span></p>
                                            <input asp-for="@Model.c_model.FName" class="form-control" />
                                            <span asp-validation-for="@Model.c_model.FName" class="text-danger"></span>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <div class="checkout__input">
                                                    <p><label asp-for="@Model.c_model.FTotalHours" class="control-label"></label><span>*</span></p>
                                                    <input asp-for="@Model.c_model.FTotalHours" class="form-control" />
                                                    <span asp-validation-for="@Model.c_model.FTotalHours" class="text-danger"></span>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="checkout__input">
                                                    <p><label asp-for="@Model.c_model.FTotalNumber" class="control-label"></label><span>*</span></p>
                                                    <input asp-for="@Model.c_model.FTotalNumber" class="form-control" />
                                                    <span asp-validation-for="@Model.c_model.FTotalNumber" class="text-danger"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <div class="checkout__input">
                                                    <p><label asp-for="@Model.c_model.FGrade" class="control-label"></label><span>*</span></p>
                                                    <input asp-for="@Model.c_model.FGrade" class="form-control" />
                                                    <span asp-validation-for="@Model.c_model.FGrade" class="text-danger"></span>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="checkout__input">
                                                    <p><label asp-for="@Model.c_model.FGrade" class="control-label"></label><span>*</span></p>
                                                    @*<input asp-for="@Model.c_model.FSchoolYear" class="form-control" />*@
                                                    @Html.DropDownListFor(model => model.c_model.FSchoolYear, (IEnumerable<SelectListItem>)Model.SchoolYearDDL, new { @class = "form-contrl" })
                                                    <span asp-validation-for="@Model.c_model.FSchoolYear" class="text-danger"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <div class="checkout__input">
                                                    <p><label asp-for="@Model.c_model.FSchoolYear" class="control-label"></label><span>*</span></p>
                                                    <input asp-for="@Model.c_model.FOriginalPrice" class="form-control" />
                                                    <span asp-validation-for="@Model.c_model.FOriginalPrice" class="text-danger"></span>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="checkout__input">
                                                    <p><label asp-for="@Model.c_model.FSpecialOffer" class="control-label"></label><span>*</span></p>
                                                    <input asp-for="@Model.c_model.FOriginalPrice" class="form-control" />
                                                    <span asp-validation-for="@Model.c_model.FSpecialOffer" class="text-danger"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="checkout__input">
                                            <p><label asp-for="@Model.c_model.FSpecialOffer" class="control-label"></label><span>*</span></p>
                                            <input asp-for="@Model.c_model.FSpecialOffer" class="form-control" />
                                            <span asp-validation-for="@Model.c_model.FSummary" class="text-danger"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane" id="tabs-2" role="tabpanel">
                    <div class="cart__total">
                        <h6>Cart total</h6>
                        <ul>
                            <li>課堂數&nbsp;&nbsp;<input id="txtCDetail_CourseNumber" type="text">&emsp;課堂進度(頁數)&nbsp;&nbsp;<input id="txtCDetail_Schedule" type="text">&emsp;授課方式&nbsp;&nbsp;<input id="txtCDetail_TeachingMethod" type="text" /></li>
                            <li>課堂進度說明&nbsp;&nbsp;<textarea id="txtCDetail_ScheduleDetail"></textarea>授課備註&nbsp;&nbsp;<textarea id="txtCDetail_Remark"></textarea></li>
                        </ul>
                        <input type="button" id="btnAddDetail" value="addDetail" />
                    </div>
                    <table>
                        <thead>
                            <tr>
                                @*<th>@Html.DisplayNameFor(model => model.c_model_detail.FCourseId)</th>*@
                                @*<th>序號</th>*@
                                <th>@Html.DisplayNameFor(model => model.c_model_detail.FCourseNumber)</th>
                                <th>@Html.DisplayNameFor(model => model.c_model_detail.FSchedule)</th>
                                <th>@Html.DisplayNameFor(model => model.c_model_detail.FScheduleDetail)</th>
                                <th>@Html.DisplayNameFor(model => model.c_model_detail.FTeachingMethod)</th>
                                <th>@Html.DisplayNameFor(model => model.c_model_detail.FRemark)</th>
                            </tr>
                        </thead>
                        <tbody>
                            @{
                                if (Model.c_model_detail_list != null)
                                {

                                    int count = 0;
                                    for (int i = 0; i < Model.c_model_detail_list.Count; i++)
                                    {
                                        count++;
                                        <tr>
                                            @*<td>@Html.EditorFor(modelItem => Model.c_model_detail_list[i].FCourseId)</td>*@
                                            @*<td>@count</td>*@
                                            <td>@Html.EditorFor(modelItem => Model.c_model_detail_list[i].FCourseNumber)</td>
                                            <td>@Html.EditorFor(modelItem => Model.c_model_detail_list[i].FSchedule)</td>
                                            <td>@Html.EditorFor(modelItem => Model.c_model_detail_list[i].FScheduleDetail)</td>
                                            <td>@Html.EditorFor(modelItem => Model.c_model_detail_list[i].FTeachingMethod)</td>
                                            <td>@Html.EditorFor(modelItem => Model.c_model_detail_list[i].FRemark)</td>
                                        </tr>
                                    }
                                }
                            }
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
    <div class="form-group">
        <input type="submit" value="Create" class="btn btn-primary" />
    </div>

</form>
<!-- Checkout Section End -->
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
<script>
        $("#btnAddDetail").click(async function () {
            let number = document.getElementById("txtCDetail_CourseNumber").value;
            //console.log(number);
            let schedule = document.getElementById("txtCDetail_Schedule").value;
            let schedule_detail = document.getElementById("txtCDetail_ScheduleDetail").value;
            let teachingmethod = document.getElementById("txtCDetail_TeachingMethod").value;
            let remark = document.getElementById("txtCDetail_Remark").value;
            console.log(fetch("@Url.Content("~/CourseModelDetail/addData")" + `?coursenumber=${number}&schedule=${schedule}&scheduledetail=${schedule_detail}&teachingmethod=${teachingmethod}&remark=${remark}`));
            const response = await fetch("@Url.Content("~/CourseModelDetail/addData")"+`?coursenumber=${number}&schedule=${schedule}&scheduledetail=${schedule_detail}&teachingmethod=${teachingmethod}&remark=${remark}`);
          //  console.log(response.json())
            const arr = await response.json();
           // console.log(list)

            //fetch('url').then(response => response.json())
            //          .then(data=>console.log(data))

          // const arr = JSON.parse(list);
            //const arr = JSON.parse(list);
            console.log(arr);
            //console.log(arr[0].FCourseNumber);//arr.CourseModelDetail
            //console.log(arr[0].FCourseNumber);
            const docFrag = document.createDocumentFragment();
            arr.forEach(function (item) {
                const { FCourseNumber, FSchedule, FScheduleDetail, FTeachingMethod, FRemark } = item;

                const cell1 = document.createElement("td");
                const txt1 = document.createTextNode(FCourseNumber);
                cell1.appendChild(txt1);

                const cell2 = document.createElement("td");
                const txt2 = document.createTextNode(FSchedule);
                cell2.appendChild(txt2);

                const cell3 = document.createElement("td");
                const txt3 = document.createTextNode(FScheduleDetail);
                cell3.appendChild(txt3);

                const cell4 = document.createElement("td");
                const txt4 = document.createTextNode(FTeachingMethod);
                cell4.appendChild(txt4);

                const cell5 = document.createElement("td");
                const txt5 = document.createTextNode(FRemark);
                cell5.appendChild(txt5);

                const row = document.createElement("tr");
                row.appendChild(cell1);
                row.appendChild(cell2);
                row.appendChild(cell3);
                row.appendChild(cell4);
                row.appendChild(cell5);
                docFrag.appendChild(row);
            })

            $("tbody").empty();
            $("tbody").html(docFrag);

            //list.forEach((item) => {
            //    console.log(item.FCourseNumber);
            //})
        })
</script>
}
